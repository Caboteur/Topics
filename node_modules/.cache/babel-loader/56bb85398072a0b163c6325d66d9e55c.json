{"ast":null,"code":"import _classCallCheck from \"D:\\\\MegaSync\\\\proxy-server\\\\testing\\\\react-express-starter\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\MegaSync\\\\proxy-server\\\\testing\\\\react-express-starter\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\MegaSync\\\\proxy-server\\\\testing\\\\react-express-starter\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\MegaSync\\\\proxy-server\\\\testing\\\\react-express-starter\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"D:\\\\MegaSync\\\\proxy-server\\\\testing\\\\react-express-starter\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"D:\\\\MegaSync\\\\proxy-server\\\\testing\\\\react-express-starter\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"D:\\\\MegaSync\\\\proxy-server\\\\testing\\\\react-express-starter\\\\src\\\\components\\\\Api\\\\Api-wikipedia.js\";\nimport React from 'react';\n\nvar ApiWikipedia =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ApiWikipedia, _React$Component);\n\n  function ApiWikipedia(props) {\n    var _this;\n\n    _classCallCheck(this, ApiWikipedia);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ApiWikipedia).call(this, props));\n\n    _this.useWikiSearchEngine = function (e) {\n      e.preventDefault();\n\n      _this.setState({\n        wikiSearchReturnValues: []\n      });\n\n      var pointerToThis = _assertThisInitialized(_this);\n\n      var url = \"https://fr.wikipedia.org/w/api.php\";\n      var params = {\n        action: 'query',\n        list: 'search',\n        srsearch: _this.state.WikiSearchTerms,\n        format: 'json'\n      };\n      url = url + '?origin=*';\n      Object.keys(params).forEach(function (key) {\n        url += \"&\" + key + \"=\" + params[key];\n      });\n      fetch(url).then(function (response) {\n        return response.json();\n      }).then(function (response) {\n        // console.log(response);\n        for (var key in response.query.search) {\n          pointerToThis.state.wikiSearchReturnValues.push({\n            queryResultPageFullURL: 'no link',\n            queryResultPageID: response.query.search[key].pageid,\n            queryResultPageTitle: response.query.search[key].title,\n            queryResultPageSnippet: response.query.search[key].snippet\n          });\n        }\n      }).then(function (response) {\n        var _loop = function _loop() {\n          // console.log(pointerToThis.state.wikiSearchReturnValues);\n          var page = pointerToThis.state.wikiSearchReturnValues[key2];\n          var pageID = page.queryResultPageID;\n          var urlForRetrievingPageURLByPageID = \"https://en.wikipedia.org/w/api.php?origin=*&action=query&prop=info&pageids=\".concat(pageID, \"&inprop=url&format=json\");\n          fetch(urlForRetrievingPageURLByPageID).then(function (response) {\n            return response.json();\n          }).then(function (response) {\n            page.queryResultPageFullURL = response.query.pages[pageID].fullurl;\n            pointerToThis.forceUpdate();\n          });\n        };\n\n        for (var key2 in pointerToThis.state.wikiSearchReturnValues) {\n          _loop();\n        }\n      });\n    };\n\n    _this.changeWikiSearchTerms = function (e) {\n      _this.setState({\n        WikiSearchTerms: e.target.value\n      });\n    };\n\n    _this.state = {\n      wikiSearchReturnValues: [],\n      wikiSearchTerms: ''\n    };\n    return _this;\n  }\n\n  _createClass(ApiWikipedia, [{\n    key: \"render\",\n    value: function render() {\n      var wikiSearchResults = []; // console.log(this.state.wikiSearchReturnValues);\n\n      for (var key3 in this.state.wikiSearchReturnValues) {\n        wikiSearchResults.push(React.createElement(\"div\", {\n          className: \"searchResultDiv\",\n          key: key3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 95\n          },\n          __self: this\n        }, React.createElement(\"h3\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 96\n          },\n          __self: this\n        }, React.createElement(\"a\", {\n          href: this.state.wikiSearchReturnValues[key3].queryResultPageFullURL,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 96\n          },\n          __self: this\n        }, this.state.wikiSearchReturnValues[key3].queryResultPageTitle)), React.createElement(\"span\", {\n          className: \"link\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 97\n          },\n          __self: this\n        }, React.createElement(\"a\", {\n          href: this.state.wikiSearchReturnValues[key3].queryResultPageFullURL,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 97\n          },\n          __self: this\n        }, this.state.wikiSearchReturnValues[key3].queryResultPageFullURL)), React.createElement(\"p\", {\n          className: \"description\",\n          dangerouslySetInnerHTML: {\n            __html: this.state.wikiSearchReturnValues[key3].queryResultPageSnippet\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98\n          },\n          __self: this\n        })));\n      }\n\n      console.log(wikiSearchResults);\n      return React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, \"Wikipedia Search Engine\"), React.createElement(\"form\", {\n        action: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        value: this.state.WikiSearchTerms || '',\n        onChange: this.changeWikiSearchTerms,\n        placeholder: \"Search Wikipedia Articles\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        type: \"submit\",\n        onClick: this.useWikiSearchEngine,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, \"Search\")), wikiSearchResults);\n    }\n  }]);\n\n  return ApiWikipedia;\n}(React.Component);\n\nexport default App;","map":{"version":3,"sources":["D:/MegaSync/proxy-server/testing/react-express-starter/src/components/Api/Api-wikipedia.js"],"names":["React","ApiWikipedia","props","useWikiSearchEngine","e","preventDefault","setState","wikiSearchReturnValues","pointerToThis","url","params","action","list","srsearch","state","WikiSearchTerms","format","Object","keys","forEach","key","fetch","then","response","json","query","search","push","queryResultPageFullURL","queryResultPageID","pageid","queryResultPageTitle","title","queryResultPageSnippet","snippet","page","key2","pageID","urlForRetrievingPageURLByPageID","pages","fullurl","forceUpdate","changeWikiSearchTerms","target","value","wikiSearchTerms","wikiSearchResults","key3","__html","console","log","Component","App"],"mappings":"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","sourcesContent":["import React from 'react';\r\n\r\nclass ApiWikipedia extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      wikiSearchReturnValues: [],\r\n      wikiSearchTerms: ''\r\n    }\r\n  }\r\n\r\n\r\n\r\n  useWikiSearchEngine = (e) => {\r\n    e.preventDefault();\r\n\r\n    this.setState({\r\n      wikiSearchReturnValues: []\r\n    });\r\n\r\n    const pointerToThis = this;\r\n\r\n    var url = \"https://fr.wikipedia.org/w/api.php\";\r\n\r\n    var params = {\r\n      action: 'query',\r\n      list: 'search',\r\n      srsearch: this.state.WikiSearchTerms,\r\n      format: 'json'\r\n    };\r\n\r\n    url = url + '?origin=*';\r\n    Object.keys(params).forEach((key) => {\r\n      url += \"&\" + key + \"=\" + params[key];\r\n    });\r\n\r\n    fetch(url)\r\n      .then(\r\n        function (response) {\r\n          return response.json();\r\n        }\r\n      )\r\n      .then(\r\n        function (response) {\r\n          // console.log(response);\r\n\r\n          for (var key in response.query.search) {\r\n            pointerToThis.state.wikiSearchReturnValues.push({\r\n              queryResultPageFullURL: 'no link',\r\n              queryResultPageID: response.query.search[key].pageid,\r\n              queryResultPageTitle: response.query.search[key].title,\r\n              queryResultPageSnippet: response.query.search[key].snippet\r\n            });\r\n          }\r\n        }\r\n      )\r\n      .then(\r\n        function (response) {\r\n          for (var key2 in pointerToThis.state.wikiSearchReturnValues) {\r\n            // console.log(pointerToThis.state.wikiSearchReturnValues);\r\n            let page = pointerToThis.state.wikiSearchReturnValues[key2];\r\n            let pageID = page.queryResultPageID;\r\n            let urlForRetrievingPageURLByPageID = `https://en.wikipedia.org/w/api.php?origin=*&action=query&prop=info&pageids=${pageID}&inprop=url&format=json`;\r\n\r\n            fetch(urlForRetrievingPageURLByPageID)\r\n              .then(\r\n                function (response) {\r\n                  return response.json();\r\n                }\r\n              )\r\n              .then(\r\n                function (response) {\r\n                  page.queryResultPageFullURL = response.query.pages[pageID].fullurl;\r\n\r\n                  pointerToThis.forceUpdate();\r\n                }\r\n              )\r\n          }\r\n        }\r\n      )\r\n  }\r\n\r\n  changeWikiSearchTerms = (e) => {\r\n    this.setState({\r\n      WikiSearchTerms: e.target.value\r\n    });\r\n  }\r\n\r\n  render() {\r\n    let wikiSearchResults = [];\r\n    // console.log(this.state.wikiSearchReturnValues);\r\n\r\n    for (var key3 in this.state.wikiSearchReturnValues) {\r\n      wikiSearchResults.push(\r\n        <div className=\"searchResultDiv\" key={key3}>\r\n          <h3><a href={this.state.wikiSearchReturnValues[key3].queryResultPageFullURL}>{this.state.wikiSearchReturnValues[key3].queryResultPageTitle}</a></h3>\r\n          <span className='link'><a href={this.state.wikiSearchReturnValues[key3].queryResultPageFullURL}>{this.state.wikiSearchReturnValues[key3].queryResultPageFullURL}</a></span>\r\n          <p className=\"description\" dangerouslySetInnerHTML={{__html: this.state.wikiSearchReturnValues[key3].queryResultPageSnippet}}></p>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    console.log(wikiSearchResults);\r\n\r\n    return (\r\n      <div className=\"App\">\r\n        <h1>Wikipedia Search Engine</h1>\r\n        <form action=\"\">\r\n          <input type=\"text\" value={this.state.WikiSearchTerms || ''} onChange={this.changeWikiSearchTerms} placeholder='Search Wikipedia Articles' />\r\n          <button type='submit' onClick={this.useWikiSearchEngine}>Search</button>\r\n        </form>\r\n        {wikiSearchResults}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}