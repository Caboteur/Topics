{"ast":null,"code":"/*\n  Module Dependencies\n*/\nvar htmlparser = require('htmlparser2'),\n    parse5 = require('parse5');\n/*\n  Parser\n*/\n\n\nexports = module.exports = function (content, options, isDocument) {\n  var dom = exports.evaluate(content, options, isDocument),\n      // Generic root element\n  root = exports.evaluate('<root></root>', options, false)[0];\n  root.type = 'root';\n  root.parent = null; // Update the dom using the root\n\n  exports.update(dom, root);\n  return root;\n};\n\nfunction parseWithParse5(content, isDocument) {\n  var parse = isDocument ? parse5.parse : parse5.parseFragment,\n      root = parse(content, {\n    treeAdapter: parse5.treeAdapters.htmlparser2\n  });\n  return root.children;\n}\n\nexports.evaluate = function (content, options, isDocument) {\n  // options = options || $.fn.options;\n  var dom;\n  if (Buffer.isBuffer(content)) content = content.toString();\n\n  if (typeof content === 'string') {\n    var useHtmlParser2 = options.xmlMode || options._useHtmlParser2;\n    dom = useHtmlParser2 ? htmlparser.parseDOM(content, options) : parseWithParse5(content, isDocument);\n  } else {\n    dom = content;\n  }\n\n  return dom;\n};\n/*\n  Update the dom structure, for one changed layer\n*/\n\n\nexports.update = function (arr, parent) {\n  // normalize\n  if (!Array.isArray(arr)) arr = [arr]; // Update parent\n\n  if (parent) {\n    parent.children = arr;\n  } else {\n    parent = null;\n  } // Update neighbors\n\n\n  for (var i = 0; i < arr.length; i++) {\n    var node = arr[i]; // Cleanly remove existing nodes from their previous structures.\n\n    var oldParent = node.parent || node.root,\n        oldSiblings = oldParent && oldParent.children;\n\n    if (oldSiblings && oldSiblings !== arr) {\n      oldSiblings.splice(oldSiblings.indexOf(node), 1);\n\n      if (node.prev) {\n        node.prev.next = node.next;\n      }\n\n      if (node.next) {\n        node.next.prev = node.prev;\n      }\n    }\n\n    if (parent) {\n      node.prev = arr[i - 1] || null;\n      node.next = arr[i + 1] || null;\n    } else {\n      node.prev = node.next = null;\n    }\n\n    if (parent && parent.type === 'root') {\n      node.root = parent;\n      node.parent = null;\n    } else {\n      node.root = null;\n      node.parent = parent;\n    }\n  }\n\n  return parent;\n}; // module.exports = $.extend(exports);","map":{"version":3,"sources":["D:/MegaSync/proxy-server/testing/react-express-starter/node_modules/cheerio/lib/parse.js"],"names":["htmlparser","require","parse5","exports","module","content","options","isDocument","dom","evaluate","root","type","parent","update","parseWithParse5","parse","parseFragment","treeAdapter","treeAdapters","htmlparser2","children","Buffer","isBuffer","toString","useHtmlParser2","xmlMode","_useHtmlParser2","parseDOM","arr","Array","isArray","i","length","node","oldParent","oldSiblings","splice","indexOf","prev","next"],"mappings":"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","sourcesContent":["/*\n  Module Dependencies\n*/\nvar htmlparser = require('htmlparser2'),\n    parse5 = require('parse5');\n\n/*\n  Parser\n*/\nexports = module.exports = function(content, options, isDocument) {\n  var dom = exports.evaluate(content, options, isDocument),\n      // Generic root element\n      root = exports.evaluate('<root></root>', options, false)[0];\n\n  root.type = 'root';\n  root.parent = null;\n\n  // Update the dom using the root\n  exports.update(dom, root);\n\n  return root;\n};\n\nfunction parseWithParse5 (content, isDocument) {\n  var parse = isDocument ? parse5.parse : parse5.parseFragment,\n      root = parse(content, { treeAdapter: parse5.treeAdapters.htmlparser2 });\n\n  return root.children;\n}\n\nexports.evaluate = function(content, options, isDocument) {\n  // options = options || $.fn.options;\n\n  var dom;\n\n  if (Buffer.isBuffer(content))\n    content = content.toString();\n\n  if (typeof content === 'string') {\n    var useHtmlParser2 = options.xmlMode || options._useHtmlParser2;\n\n    dom = useHtmlParser2 ? htmlparser.parseDOM(content, options) : parseWithParse5(content, isDocument);\n  } else {\n    dom = content;\n  }\n\n  return dom;\n};\n\n/*\n  Update the dom structure, for one changed layer\n*/\nexports.update = function(arr, parent) {\n  // normalize\n  if (!Array.isArray(arr)) arr = [arr];\n\n  // Update parent\n  if (parent) {\n    parent.children = arr;\n  } else {\n    parent = null;\n  }\n\n  // Update neighbors\n  for (var i = 0; i < arr.length; i++) {\n    var node = arr[i];\n\n    // Cleanly remove existing nodes from their previous structures.\n    var oldParent = node.parent || node.root,\n        oldSiblings = oldParent && oldParent.children;\n    if (oldSiblings && oldSiblings !== arr) {\n      oldSiblings.splice(oldSiblings.indexOf(node), 1);\n      if (node.prev) {\n        node.prev.next = node.next;\n      }\n      if (node.next) {\n        node.next.prev = node.prev;\n      }\n    }\n\n    if (parent) {\n      node.prev = arr[i - 1] || null;\n      node.next = arr[i + 1] || null;\n    } else {\n      node.prev = node.next = null;\n    }\n\n    if (parent && parent.type === 'root') {\n      node.root = parent;\n      node.parent = null;\n    } else {\n      node.root = null;\n      node.parent = parent;\n    }\n  }\n\n  return parent;\n};\n\n// module.exports = $.extend(exports);\n"]},"metadata":{},"sourceType":"script"}